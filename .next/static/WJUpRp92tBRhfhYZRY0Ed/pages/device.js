(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1674:function(e,t,n){__NEXT_REGISTER_PAGE("/device",function(){return e.exports=n(1675),{page:e.exports.default}})},1675:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=((r=n(388))&&r.__esModule?r:{default:r}).default;t.default=o},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(26),a=n(70),i=(r=n(389))&&r.__esModule?r:{default:r};var l=(0,o.connect)(function(e){return{isAuthenticated:a.authSelectors.isAuthenticated(e)}},null,null,{pure:!1})(i.default);t.default=l},389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=(l(n(2)),n(28)),a=l(n(83)),i=l(n(390));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),n=t,(o=[{key:"render",value:function(){return this.props.isAuthenticated?r.default.createElement("div",{className:this.props.classes.layout},r.default.createElement(a.default,{container:!0,spacing:this.props.theme.main.spacing},r.default.createElement(a.default,{item:!0,xs:12},r.default.createElement(i.default,null)))):null}}])&&u(n.prototype,o),l&&u(n,l),t}(),m=(0,o.withStyles)(function(e){return{layout:(t={width:"100%",maxWidth:1300+2*e.main.spacing,flex:1,padding:e.main.spacing},n=e.breakpoints.down("md"),r={padding:e.main.spacing/2,maxWidth:1300+e.main.spacing},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)};var t,n,r},{withTheme:!0})(p);t.default=m},390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(26),a=n(25),i=n(120),l=(r=n(391))&&r.__esModule?r:{default:r};var s=(0,a.injectIntl)((0,o.connect)(function(e){return{devices:i.devicesSelectors.getList(e),isAllSelected:i.devicesSelectors.isAllSelected(e),isAllDeselected:i.devicesSelectors.isAllDeselected(e)}},function(e){return{onLoad:function(){return e(i.devicesOperations.load())},onCreate:function(){return e(i.devicesOperations.showEditModal())},onEdit:function(){return e(i.devicesOperations.editFirstSelected())},onDelete:function(t){return e(i.devicesOperations.reqRemove({id:t}))},onSetSelected:function(t,n){return e(i.devicesOperations.setSelected({deviceId:t,isSelected:n}))},onSelectAll:function(){return e(i.devicesOperations.selectAll())},onDeselectAll:function(){return e(i.devicesOperations.deselectAll())}}})(l.default));t.default=s},391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=b(n(19)),o=b(n(0)),a=(b(n(2)),b(n(7))),i=(n(20),n(25)),l=n(28),s=b(n(392)),u=b(n(393)),c=b(n(394)),d=b(n(395)),f=b(n(396)),p=b(n(54)),m=b(n(257)),h=b(n(397)),E=b(n(399));function b(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=g(t).call(this,e))||"object"!==v(o)&&"function"!=typeof o?S(r):o).state={isConfirmOpen:!1},n.handleCreateAction=n.handleCreateAction.bind(S(S(n))),n.handleEditAction=n.handleEditAction.bind(S(S(n))),n.handleDeleteAction=n.handleDeleteAction.bind(S(S(n))),n.handleCancelDelete=n.handleCancelDelete.bind(S(S(n))),n.handleConfirmDelete=n.handleConfirmDelete.bind(S(S(n))),n}var n,l,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,o.default.Component),n=t,(l=[{key:"handleToggleAll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.props.isAllSelected?this.props.onDeselectAll():this.props.onSelectAll()}},{key:"handleToggle",value:function(e){var t=this.props.devices.find(function(t){return t.get("id")===e}),n=t&&t.get("isSelected");this.props.onSetSelected(e,!n)}},{key:"handleCreateAction",value:function(){this.props.onCreate()}},{key:"handleEditAction",value:function(){this.props.onEdit()}},{key:"handleDeleteAction",value:function(){this.setState({isConfirmOpen:!0})}},{key:"handleCancelDelete",value:function(){this.setState({isConfirmOpen:!1})}},{key:"handleConfirmDelete",value:function(){var e,t=(e=r.default.mark(function e(){var t=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isConfirmOpen:!1}),e.next=3,Promise.all(this.props.devices.filter(function(e){return e.get("isSelected")}).map(function(e){return t.props.onDelete(e.get("id"))}));case 3:this.props.onLoad();case 4:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,l,"next",e)}function l(e){y(a,r,o,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"secondary",classes:{root:this.props.classes.button},onClick:this.handleCreateAction},o.default.createElement(i.FormattedMessage,{id:"DEVICES_CREATE_BUTTON"}))),o.default.createElement(s.default,{padding:"dense"},o.default.createElement(d.default,null,o.default.createElement(f.default,null,o.default.createElement(c.default,{padding:"none",classes:{root:this.props.classes.checkboxField}},o.default.createElement(m.default,{checked:!!this.props.devices.size&&this.props.isAllSelected,classes:{root:this.props.classes.checkbox},indeterminate:!this.props.isAllSelected&&!this.props.isAllDeselected,onChange:function(){return e.handleToggleAll()},value:"on"})),o.default.createElement(c.default,null,o.default.createElement(i.FormattedMessage,{id:"DEVICES_NAME_COLUMN"})),o.default.createElement(c.default,null,o.default.createElement(i.FormattedMessage,{id:"DEVICES_ADDRESS_COLUMN"})),o.default.createElement(c.default,null,o.default.createElement(i.FormattedMessage,{id:"DEVICES_CONN_STRING_COLUMN"})))),o.default.createElement(u.default,null,this.props.devices.map(function(t,n){return o.default.createElement(f.default,{key:"row-".concat(n)},o.default.createElement(c.default,{padding:"none",className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected"),classes:{root:e.props.classes.checkboxField}},o.default.createElement(m.default,{checked:!!t.get("isSelected"),classes:{root:e.props.classes.checkbox},onChange:function(){return e.handleToggle(t.get("id"))},value:"on"})),o.default.createElement(c.default,{className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected"),component:"th",scope:"row"},t.get("name")),o.default.createElement(c.default,{className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected")}),o.default.createElement(c.default,{className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected")}))}))),o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleEditAction},o.default.createElement(i.FormattedMessage,{id:"DEVICES_EDIT_BUTTON"})),o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleDeleteAction},o.default.createElement(i.FormattedMessage,{id:"DEVICES_DELETE_BUTTON"}))),o.default.createElement(h.default,null),o.default.createElement(E.default,{isOpen:this.state.isConfirmOpen,title:"DELETE_DEVICE_TITLE",text:"DELETE_DEVICE_TEXT",cancel:"DELETE_DEVICE_CANCEL",submit:"DELETE_DEVICE_SUBMIT",onCancel:this.handleCancelDelete,onSubmit:this.handleConfirmDelete}))}}])&&_(n.prototype,l),b&&_(n,b),t}(),C=(0,l.withStyles)(function(){return{buttons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"stretch"},button:{margin:"0.5rem"},checkboxField:{width:1},checkbox:{padding:"0.5rem 1rem"}}},{withTheme:!0})(w);t.default=C},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(19)),o=n(20),a=n(25),i=n(43),l=n(152),s=n(120),u=d(n(154)),c=d(n(398));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=c.default.formName,h=(0,a.injectIntl)((0,u.default)(c.default,function(e){return{fieldValues:p({},m,(0,i.getFormValues)(m)(e)||(0,o.Map)()),fieldErrors:p({},m,(0,i.getFormAsyncErrors)(m)(e)||(0,o.Map)()),data:s.devicesSelectors.getEditModalData(e),isOpen:s.devicesSelectors.isEditModalOpen(e)}},function(e){return{dispatch:e,updateValidation:(t=r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,l.startAsyncValidation)(m));case 2:return t.next=4,e((0,l.stopAsyncValidation)(m,n));case 4:case"end":return t.stop()}},t,this)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){f(a,r,o,i,l,"next",e)}function l(e){f(a,r,o,i,l,"throw",e)}i(void 0)})},function(e){return n.apply(this,arguments)}),onCancel:function(){return e(s.devicesOperations.hideEditModal())},onLoad:function(){return e(s.devicesOperations.load())},onCreate:function(t,n){return e(s.devicesOperations.reqCreate({name:t,password:n}))},onEdit:function(t,n,r){return e(s.devicesOperations.reqEdit({id:t,name:n,password:r}))}};var t,n}));t.default=h},398:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=y(n(19)),o=y(n(0)),a=y(n(2)),i=n(20),l=n(25),s=n(43),u=n(28),c=y(n(95)),d=y(n(96)),f=y(n(97)),p=y(n(155)),m=y(n(127)),h=y(n(83)),E=y(n(54)),b=y(n(156)),v=y(n(157));function y(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=O(n).call(this,e))||"object"!==_(o)&&"function"!=typeof o?D(r):o).state={isOpen:e.isOpen},t.submit=t.submit.bind(D(D(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(n,b.default),w(n,null,[{key:"onSubmit",value:function(){var t,n=(t=r.default.mark(function t(n,o,a){var i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data){t.next=6;break}return t.next=3,a.onEdit(a.data.get("id"),this.getValue(a,"name"),this.getValue(a,"password"));case 3:i=t.sent,t.next=9;break;case 6:return t.next=8,a.onCreate(this.getValue(a,"name"),this.getValue(a,"password"));case 8:i=t.sent;case 9:if(!0!==i){t.next=14;break}return t.next=12,a.onLoad();case 12:t.next=19;break;case 14:if(!i||!e.isObject(i)){t.next=18;break}throw new s.SubmissionError(i);case 18:throw new s.SubmissionError({_error:"EDIT_DEVICE_FAILED"});case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){g(a,r,o,i,l,"next",e)}function l(e){g(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,t,r){return n.apply(this,arguments)}}()},{key:"getDerivedStateFromProps",value:function(t,n){var r={};if(n.isOpen!==t.isOpen){var o=t.data&&t.data.get("name");t.dispatch(t.change("name",o||"")),t.dispatch(t.change("password","")),t.dispatch(t.clearAsyncError()),t.dispatch(t.clearSubmitErrors()),r.isOpen=t.isOpen}return e.keys(r).length?r:null}}]),w(n,[{key:"render",value:function(){var t=this;return o.default.createElement(c.default,{maxWidth:"xs",fullWidth:!0,open:this.props.isOpen,onClose:this.props.onCancel},o.default.createElement(m.default,null,o.default.createElement(l.FormattedMessage,{id:this.props.data?"EDIT_DEVICE_TITLE_EDIT":"EDIT_DEVICE_TITLE_CREATE"})),this.state.errors&&o.default.createElement(f.default,null,e.map(e.isArray(this.props.error)?this.props.error:[this.props.error],function(n,r){return o.default.createElement(p.default,{key:"error-".concat(r),classes:{root:t.props.classes.error}},e.isArray(n)?o.default.createElement(l.FormattedMessage,{id:n[0],values:n[1]}):o.default.createElement(l.FormattedMessage,{id:n}))})),o.default.createElement(f.default,null,o.default.createElement(h.default,{container:!0,spacing:16,component:"form",noValidate:!0,autoComplete:"off",onSubmit:this.submit},o.default.createElement(h.default,{item:!0,xs:12},o.default.createElement(v.default,{formFields:this.constructor.fields,formProps:this.props,name:"name",type:"text",onSubmit:this.submit})),o.default.createElement(h.default,{item:!0,xs:12},o.default.createElement(v.default,{formFields:this.constructor.fields,formProps:this.props,name:"password",type:"password",onSubmit:this.submit})))),o.default.createElement(d.default,{classes:{root:this.props.classes.actions}},o.default.createElement(E.default,{variant:"contained",color:"primary",disabled:this.props.submitting,onClick:this.props.onCancel},o.default.createElement(l.FormattedMessage,{id:"EDIT_DEVICE_CANCEL"})),o.default.createElement(E.default,{variant:"contained",color:"secondary",disabled:this.props.submitting,onClick:this.submit},o.default.createElement(l.FormattedMessage,{id:"EDIT_DEVICE_SUBMIT"}))))}}]),n}();A(T,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){A(e,t,n[t])})}return e}({},b.default.propTypes,{intl:l.intlShape,theme:a.default.object.isRequired,classes:a.default.object.isRequired,isOpen:a.default.bool.isRequired,data:a.default.instanceOf(i.Map),onCreate:a.default.func.isRequired,onEdit:a.default.func.isRequired})),A(T,"formName","editCameraForm"),A(T,"fields",{name:{normalize:"rows:1|remove:spaces",transform:"trim",label:"EDIT_DEVICE_NAME_LABEL"},password:{normalize:"rows:1",transform:"trim",label:"EDIT_DEVICE_PASSWORD_LABEL"}});var k=(0,u.withStyles)(function(e){return{error:e.main.error,actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}},{withTheme:!0})(T);t.default=k}).call(this,n(14))}},[[1674,1,0]]]);