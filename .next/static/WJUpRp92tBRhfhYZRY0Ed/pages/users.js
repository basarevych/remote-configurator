(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1683:function(e,t,n){__NEXT_REGISTER_PAGE("/users",function(){return e.exports=n(1684),{page:e.exports.default}})},1684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(19)),o=i(n(1685)),a=n(180);function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}o.default.getInitialProps=function(){var e,t=(e=r.default.mark(function e(t){var n,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,o=t.req,e.next=3,n.dispatch(a.usersOperations.load({req:o}));case 3:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,s,"next",e)}function s(e){l(a,r,o,i,s,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();var s=o.default;t.default=s},1685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(26),a=n(70),i=(r=n(1686))&&r.__esModule?r:{default:r};var l=(0,o.connect)(function(e){return{isAuthenticated:a.authSelectors.isAuthenticated(e)}},null,null,{pure:!1})(i.default);t.default=l},1686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(0)),o=(l(n(2)),n(28)),a=l(n(83)),i=l(n(1687));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),n=t,(o=[{key:"render",value:function(){return this.props.isAuthenticated?r.default.createElement("div",{className:this.props.classes.layout},r.default.createElement(a.default,{container:!0,spacing:this.props.theme.main.spacing},r.default.createElement(a.default,{item:!0,xs:12},r.default.createElement(i.default,null)))):null}}])&&u(n.prototype,o),l&&u(n,l),t}(),m=(0,o.withStyles)(function(e){return{layout:(t={width:"100%",maxWidth:1300+2*e.main.spacing,flex:1,padding:e.main.spacing},n=e.breakpoints.down("md"),r={padding:e.main.spacing/2,maxWidth:1300+e.main.spacing},n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)};var t,n,r},{withTheme:!0})(p);t.default=m},1687:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(26),a=n(25),i=n(180),l=(r=n(1688))&&r.__esModule?r:{default:r};var s=(0,a.injectIntl)((0,o.connect)(function(e){return{users:i.usersSelectors.getList(e),isAllSelected:i.usersSelectors.isAllSelected(e),isAllDeselected:i.usersSelectors.isAllDeselected(e)}},function(e){return{onLoad:function(){return e(i.usersOperations.load())},onCreate:function(){return e(i.usersOperations.showEditModal())},onEdit:function(){return e(i.usersOperations.editFirstSelected())},onDelete:function(t){return e(i.usersOperations.remove({id:t}))},onSetSelected:function(t,n){return e(i.usersOperations.setSelected({userId:t,isSelected:n}))},onSelectAll:function(){return e(i.usersOperations.selectAll())},onDeselectAll:function(){return e(i.usersOperations.deselectAll())}}})(l.default));t.default=s},1688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=y(n(19)),o=y(n(0)),a=(y(n(2)),y(n(7))),i=(n(20),n(25)),l=n(28),s=y(n(392)),u=y(n(393)),c=y(n(394)),d=y(n(395)),f=y(n(396)),p=y(n(54)),m=y(n(257)),h=y(n(1689)),b=y(n(399));function y(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=_(t).call(this,e))||"object"!==E(o)&&"function"!=typeof o?O(r):o).state={isConfirmOpen:!1},n.handleCreateAction=n.handleCreateAction.bind(O(O(n))),n.handleEditAction=n.handleEditAction.bind(O(O(n))),n.handleDeleteAction=n.handleDeleteAction.bind(O(O(n))),n.handleCancelDelete=n.handleCancelDelete.bind(O(O(n))),n.handleConfirmDelete=n.handleConfirmDelete.bind(O(O(n))),n}var n,l,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.default.Component),n=t,(l=[{key:"handleToggleAll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.props.isAllSelected?this.props.onDeselectAll():this.props.onSelectAll()}},{key:"handleToggle",value:function(e){var t=this.props.users.find(function(t){return t.get("id")===e}),n=t&&t.get("isSelected");this.props.onSetSelected(e,!n)}},{key:"handleCreateAction",value:function(){this.props.onCreate()}},{key:"handleEditAction",value:function(){this.props.onEdit()}},{key:"handleDeleteAction",value:function(){this.setState({isConfirmOpen:!0})}},{key:"handleCancelDelete",value:function(){this.setState({isConfirmOpen:!1})}},{key:"handleConfirmDelete",value:function(){var e,t=(e=r.default.mark(function e(){var t=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isConfirmOpen:!1}),e.next=3,Promise.all(this.props.users.filter(function(e){return e.get("isSelected")}).map(function(e){return t.props.onDelete(e.get("id"))}));case 3:this.props.onLoad();case 4:case"end":return e.stop()}},e,this)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){v(a,r,o,i,l,"next",e)}function l(e){v(a,r,o,i,l,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"secondary",classes:{root:this.props.classes.button},onClick:this.handleCreateAction},o.default.createElement(i.FormattedMessage,{id:"USERS_CREATE_BUTTON"}))),o.default.createElement(s.default,{padding:"dense"},o.default.createElement(d.default,null,o.default.createElement(f.default,null,o.default.createElement(c.default,{padding:"none",classes:{root:this.props.classes.checkboxField}},o.default.createElement(m.default,{checked:!!this.props.users.size&&this.props.isAllSelected,classes:{root:this.props.classes.checkbox},indeterminate:!this.props.isAllSelected&&!this.props.isAllDeselected,onChange:function(){return e.handleToggleAll()},value:"on"})),o.default.createElement(c.default,null,o.default.createElement(i.FormattedMessage,{id:"USERS_LOGIN_COLUMN"})),o.default.createElement(c.default,null,o.default.createElement(i.FormattedMessage,{id:"USERS_ROLES_COLUMN"})))),o.default.createElement(u.default,null,this.props.users.map(function(t,n){return o.default.createElement(f.default,{key:"row-".concat(n)},o.default.createElement(c.default,{padding:"none",className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected"),classes:{root:e.props.classes.checkboxField}},o.default.createElement(m.default,{checked:!!t.get("isSelected"),classes:{root:e.props.classes.checkbox},onChange:function(){return e.handleToggle(t.get("id"))},value:"on"})),o.default.createElement(c.default,{className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected"),component:"th",scope:"row"},t.get("login")),o.default.createElement(c.default,{className:(0,a.default)(n%2?"even":"odd",t.get("isSelected")&&"selected")},t.get("roles").toJS().map(function(t){return e.props.intl.formatMessage({id:"EDIT_USER_".concat(t,"_LABEL")})}).join(", ")))}))),o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleEditAction},o.default.createElement(i.FormattedMessage,{id:"USERS_EDIT_BUTTON"})),o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleDeleteAction},o.default.createElement(i.FormattedMessage,{id:"USERS_DELETE_BUTTON"}))),o.default.createElement(h.default,null),o.default.createElement(b.default,{isOpen:this.state.isConfirmOpen,title:"DELETE_USER_TITLE",text:"DELETE_USER_TEXT",cancel:"DELETE_USER_CANCEL",submit:"DELETE_USER_SUBMIT",onCancel:this.handleCancelDelete,onSubmit:this.handleConfirmDelete}))}}])&&g(n.prototype,l),y&&g(n,y),t}(),A=(0,l.withStyles)(function(){return{buttons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"stretch"},button:{margin:"0.5rem"},checkboxField:{width:1},checkbox:{padding:"0.5rem 1rem"}}},{withTheme:!0})(w);t.default=A},1689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(19)),o=n(20),a=n(25),i=n(43),l=n(152),s=n(180),u=d(n(154)),c=d(n(1690));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=c.default.formName,h=(0,a.injectIntl)((0,u.default)(c.default,function(e){return{fieldValues:p({},m,(0,i.getFormValues)(m)(e)||(0,o.Map)()),fieldErrors:p({},m,(0,i.getFormAsyncErrors)(m)(e)||(0,o.Map)()),data:s.usersSelectors.getEditModalData(e),isOpen:s.usersSelectors.isEditModalOpen(e)}},function(e){return{dispatch:e,updateValidation:(t=r.default.mark(function t(n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,l.startAsyncValidation)(m));case 2:return t.next=4,e((0,l.stopAsyncValidation)(m,n));case 4:case"end":return t.stop()}},t,this)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){f(a,r,o,i,l,"next",e)}function l(e){f(a,r,o,i,l,"throw",e)}i(void 0)})},function(e){return n.apply(this,arguments)}),onCancel:function(){return e(s.usersOperations.hideEditModal())},onLoad:function(){return e(s.usersOperations.load())},onCreate:function(t,n,r){return e(s.usersOperations.create({login:t,password:n,isAdmin:r}))},onEdit:function(t,n,r,o){return e(s.usersOperations.edit({id:t,login:n,password:r,isAdmin:o}))}};var t,n}));t.default=h},1690:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(n(19)),o=_(n(0)),a=_(n(2)),i=n(20),l=n(25),s=n(43),u=n(28),c=_(n(95)),d=_(n(96)),f=_(n(97)),p=_(n(155)),m=_(n(127)),h=_(n(83)),b=_(n(54)),y=_(n(314)),E=_(n(156)),v=_(n(157)),g=_(n(57));function _(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(t){function n(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(t=!(o=w(n).call(this,e))||"object"!==S(o)&&"function"!=typeof o?x(r):o).state={isOpen:e.isOpen},t.submit=t.submit.bind(x(x(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(n,E.default),C(n,null,[{key:"onSubmit",value:function(){var t,n=(t=r.default.mark(function t(n,o,a){var i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.data){t.next=6;break}return t.next=3,a.onEdit(a.data.get("id"),this.getValue(a,"login"),this.getValue(a,"password"),"on"===this.getValue(a,"isAdmin"));case 3:i=t.sent,t.next=9;break;case 6:return t.next=8,a.onCreate(this.getValue(a,"login"),this.getValue(a,"password"),"on"===this.getValue(a,"isAdmin"));case 8:i=t.sent;case 9:if(!0!==i){t.next=14;break}return t.next=12,a.onLoad();case 12:t.next=19;break;case 14:if(!i||!e.isObject(i)){t.next=18;break}throw new s.SubmissionError(i);case 18:throw new s.SubmissionError({_error:"EDIT_USER_FAILED"});case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}},t,this)}),function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(e){O(a,r,o,i,l,"next",e)}function l(e){O(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,t,r){return n.apply(this,arguments)}}()},{key:"getDerivedStateFromProps",value:function(t,n){var r={};if(n.isOpen!==t.isOpen){var o=t.data&&t.data.get("login"),a=t.data&&t.data.get("roles").includes(g.default.roles.ADMIN);t.dispatch(t.change("login",o||"")),t.dispatch(t.change("password","")),t.dispatch(t.change("isAdmin",a?"on":"off")),t.dispatch(t.clearAsyncError()),t.dispatch(t.clearSubmitErrors()),r.isOpen=t.isOpen}return e.keys(r).length?r:null}}]),C(n,[{key:"render",value:function(){var t=this;return o.default.createElement(c.default,{maxWidth:"xs",fullWidth:!0,open:this.props.isOpen,onClose:this.props.onCancel},o.default.createElement(m.default,null,o.default.createElement(l.FormattedMessage,{id:this.props.data?"EDIT_USER_TITLE_EDIT":"EDIT_USER_TITLE_CREATE"})),this.props.error&&o.default.createElement(f.default,null,e.map(e.isArray(this.props.error)?this.props.error:[this.props.error],function(n,r){return o.default.createElement(p.default,{key:"error-".concat(r),classes:{root:t.props.classes.error}},e.isArray(n)?o.default.createElement(l.FormattedMessage,{id:n[0],values:n[1]}):o.default.createElement(l.FormattedMessage,{id:n}))})),o.default.createElement(f.default,null,o.default.createElement(h.default,{container:!0,spacing:16,component:"form",noValidate:!0,autoComplete:"off",onSubmit:this.submit},o.default.createElement(h.default,{item:!0,xs:12},o.default.createElement(v.default,{formFields:this.constructor.fields,formProps:this.props,name:"login",type:"text",onSubmit:this.submit})),o.default.createElement(h.default,{item:!0,xs:12},o.default.createElement(v.default,{formFields:this.constructor.fields,formProps:this.props,name:"password",type:"password",onSubmit:this.submit})),o.default.createElement(h.default,{item:!0,xs:12},o.default.createElement(v.default,{formFields:this.constructor.fields,formProps:this.props,name:"isAdmin",type:"checkbox",onSubmit:this.submit})))),o.default.createElement(d.default,{classes:{root:this.props.classes.actions}},o.default.createElement(b.default,{variant:"contained",color:"primary",disabled:this.props.submitting,onClick:this.props.onCancel},o.default.createElement(l.FormattedMessage,{id:"EDIT_USER_CANCEL"})),o.default.createElement(b.default,{variant:"contained",color:"secondary",disabled:this.props.submitting,onClick:this.submit},o.default.createElement(l.FormattedMessage,{id:"EDIT_USER_SUBMIT"}))))}}]),n}();k(D,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}({},E.default.propTypes,{intl:l.intlShape,theme:a.default.object.isRequired,classes:a.default.object.isRequired,isOpen:a.default.bool.isRequired,data:a.default.instanceOf(i.Map),onCancel:a.default.func.isRequired,onLoad:a.default.func.isRequired,onCreate:a.default.func.isRequired,onEdit:a.default.func.isRequired})),k(D,"formName","editUserForm"),k(D,"fields",{login:{normalize:"rows:1|remove:spaces",transform:"trim",label:"EDIT_USER_LOGIN_LABEL"},password:{label:"EDIT_USER_PASSWORD_LABEL"},isAdmin:{label:"EDIT_USER_ADMIN_LABEL"}});var P=(0,u.withStyles)(function(){return{error:{color:y.default[500]},actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}},{withTheme:!0})(D);t.default=P}).call(this,n(14))}},[[1683,1,0]]]);