(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{122:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIDE_EDIT_MODAL=t.SHOW_EDIT_MODAL=t.DESELECT_ALL=t.SELECT_ALL=t.SET_SELECTED=t.SET_LIST=void 0;t.SET_LIST="app/users/SET_LIST";t.SET_SELECTED="app/users/SET_SELECTED";t.SELECT_ALL="app/users/SELECT_ALL";t.DESELECT_ALL="app/users/DESELECT_ALL";t.SHOW_EDIT_MODAL="app/users/SHOW_EDIT_MODAL";t.HIDE_EDIT_MODAL="app/users/HIDE_EDIT_MODAL"},1685:function(e,t,r){__NEXT_REGISTER_PAGE("/users",function(){return e.exports=r(1686),{page:e.exports.default}})},1686:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(19)),o=a(r(1687)),s=r(184);function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}o.default.getInitialProps=function(){var e,t=(e=n.default.mark(function e(t){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.store,o=t.req,e.next=3,r.dispatch(s.usersOperations.load({req:o}));case 3:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var s=e.apply(t,r);function a(e){i(s,n,o,a,u,"next",e)}function u(e){i(s,n,o,a,u,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}();var u=o.default;t.default=u},1687:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(26),s=r(70),a=(n=r(1688))&&n.__esModule?n:{default:n};var i=(0,o.connect)(function(e){return{isAuthenticated:s.authSelectors.isAuthenticated(e)}},null,null,{pure:!1})(a.default);t.default=i},1688:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(0)),o=(i(r(2)),r(28)),s=i(r(84)),a=i(r(1689));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,d(t).apply(this,arguments))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,n.default.Component),r=t,(o=[{key:"render",value:function(){return this.props.isAuthenticated?n.default.createElement("div",{className:this.props.classes.layout},n.default.createElement(s.default,{container:!0,spacing:this.props.theme.main.spacing},n.default.createElement(s.default,{item:!0,xs:12},n.default.createElement(a.default,null)))):null}}])&&l(r.prototype,o),i&&l(r,i),t}(),h=(0,o.withStyles)(function(e){return{layout:(t={width:"100%",maxWidth:1300+2*e.main.spacing,flex:1,padding:e.main.spacing},r=e.breakpoints.down("md"),n={padding:e.main.spacing/2,maxWidth:1300+e.main.spacing},r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t)};var t,r,n},{withTheme:!0})(p);t.default=h},1689:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=r(26),s=r(25),a=r(184),i=(n=r(1690))&&n.__esModule?n:{default:n};var u=(0,s.injectIntl)((0,o.connect)(function(e){return{users:a.usersSelectors.getList(e),isAllSelected:a.usersSelectors.isAllSelected(e),isAllDeselected:a.usersSelectors.isAllDeselected(e)}},function(e){return{onLoad:function(){return e(a.usersOperations.load())},onCreate:function(){return e(a.usersOperations.showEditModal())},onEdit:function(){return e(a.usersOperations.editFirstSelected())},onDelete:function(t){return e(a.usersOperations.remove({id:t}))},onSetSelected:function(t,r){return e(a.usersOperations.setSelected({userId:t,isSelected:r}))},onSelectAll:function(){return e(a.usersOperations.selectAll())},onDeselectAll:function(){return e(a.usersOperations.deselectAll())}}})(i.default));t.default=u},1690:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=v(r(19)),o=v(r(0)),s=(v(r(2)),v(r(7))),a=(r(20),r(25)),i=r(28),u=v(r(397)),l=v(r(398)),c=v(r(399)),d=v(r(400)),f=v(r(401)),p=v(r(55)),h=v(r(261)),m=v(r(1691)),E=v(r(404));function v(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var w=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=_(t).call(this,e))||"object"!==y(o)&&"function"!=typeof o?O(n):o).state={isConfirmOpen:!1},r.handleCreateAction=r.handleCreateAction.bind(O(O(r))),r.handleEditAction=r.handleEditAction.bind(O(O(r))),r.handleDeleteAction=r.handleDeleteAction.bind(O(O(r))),r.handleCancelDelete=r.handleCancelDelete.bind(O(O(r))),r.handleConfirmDelete=r.handleConfirmDelete.bind(O(O(r))),r}var r,i,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.default.Component),r=t,(i=[{key:"handleToggleAll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.props.isAllSelected?this.props.onDeselectAll():this.props.onSelectAll()}},{key:"handleToggle",value:function(e){var t=this.props.users.find(function(t){return t.get("id")===e}),r=t&&t.get("isSelected");this.props.onSetSelected(e,!r)}},{key:"handleCreateAction",value:function(){this.props.onCreate()}},{key:"handleEditAction",value:function(){this.props.onEdit()}},{key:"handleDeleteAction",value:function(){this.setState({isConfirmOpen:!0})}},{key:"handleCancelDelete",value:function(){this.setState({isConfirmOpen:!1})}},{key:"handleConfirmDelete",value:function(){var e,t=(e=n.default.mark(function e(){var t=this;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isConfirmOpen:!1}),e.next=3,Promise.all(this.props.users.filter(function(e){return e.get("isSelected")}).map(function(e){return t.props.onDelete(e.get("id"))}));case 3:this.props.onLoad();case 4:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var s=e.apply(t,r);function a(e){b(s,n,o,a,i,"next",e)}function i(e){b(s,n,o,a,i,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"secondary",classes:{root:this.props.classes.button},onClick:this.handleCreateAction},o.default.createElement(a.FormattedMessage,{id:"USERS_CREATE_BUTTON"}))),o.default.createElement(u.default,{padding:"dense"},o.default.createElement(d.default,null,o.default.createElement(f.default,null,o.default.createElement(c.default,{padding:"none",classes:{root:this.props.classes.checkboxField}},o.default.createElement(h.default,{checked:!!this.props.users.size&&this.props.isAllSelected,classes:{root:this.props.classes.checkbox},indeterminate:!this.props.isAllSelected&&!this.props.isAllDeselected,onChange:function(){return e.handleToggleAll()},value:"on"})),o.default.createElement(c.default,null,o.default.createElement(a.FormattedMessage,{id:"USERS_LOGIN_COLUMN"})),o.default.createElement(c.default,null,o.default.createElement(a.FormattedMessage,{id:"USERS_ROLES_COLUMN"})))),o.default.createElement(l.default,null,this.props.users.map(function(t,r){return o.default.createElement(f.default,{key:"row-".concat(r)},o.default.createElement(c.default,{padding:"none",className:(0,s.default)(r%2?"even":"odd",t.get("isSelected")&&"selected"),classes:{root:e.props.classes.checkboxField}},o.default.createElement(h.default,{checked:!!t.get("isSelected"),classes:{root:e.props.classes.checkbox},onChange:function(){return e.handleToggle(t.get("id"))},value:"on"})),o.default.createElement(c.default,{className:(0,s.default)(r%2?"even":"odd",t.get("isSelected")&&"selected"),component:"th",scope:"row"},t.get("login")),o.default.createElement(c.default,{className:(0,s.default)(r%2?"even":"odd",t.get("isSelected")&&"selected")},t.get("roles").toJS().map(function(t){return e.props.intl.formatMessage({id:"EDIT_USER_".concat(t,"_LABEL")})}).join(", ")))}))),o.default.createElement("div",{className:this.props.classes.buttons},o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleEditAction},o.default.createElement(a.FormattedMessage,{id:"USERS_EDIT_BUTTON"})),o.default.createElement(p.default,{variant:"contained",color:"primary",disabled:this.props.isAllDeselected,classes:{root:this.props.classes.button},onClick:this.handleDeleteAction},o.default.createElement(a.FormattedMessage,{id:"USERS_DELETE_BUTTON"}))),o.default.createElement(m.default,null),o.default.createElement(E.default,{isOpen:this.state.isConfirmOpen,title:"DELETE_USER_TITLE",text:"DELETE_USER_TEXT",cancel:"DELETE_USER_CANCEL",submit:"DELETE_USER_SUBMIT",onCancel:this.handleCancelDelete,onSubmit:this.handleConfirmDelete}))}}])&&g(r.prototype,i),v&&g(r,v),t}(),A=(0,i.withStyles)(function(){return{buttons:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignContent:"stretch"},button:{margin:"0.5rem"},checkboxField:{width:1},checkbox:{padding:"0.5rem 1rem"}}},{withTheme:!0})(w);t.default=A},1691:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r(19)),o=r(20),s=r(25),a=r(44),i=r(155),u=r(184),l=d(r(157)),c=d(r(1692));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=c.default.formName,m=(0,s.injectIntl)((0,l.default)(c.default,function(e){return{fieldValues:p({},h,(0,a.getFormValues)(h)(e)||(0,o.Map)()),fieldErrors:p({},h,(0,a.getFormAsyncErrors)(h)(e)||(0,o.Map)()),data:u.usersSelectors.getEditModalData(e),isOpen:u.usersSelectors.isEditModalOpen(e)}},function(e){return{dispatch:e,updateValidation:(t=n.default.mark(function t(r){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e((0,i.startAsyncValidation)(h));case 2:return t.next=4,e((0,i.stopAsyncValidation)(h,r));case 4:case"end":return t.stop()}},t,this)}),r=function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(e){f(s,n,o,a,i,"next",e)}function i(e){f(s,n,o,a,i,"throw",e)}a(void 0)})},function(e){return r.apply(this,arguments)}),onCancel:function(){return e(u.usersOperations.hideEditModal())},onLoad:function(){return e(u.usersOperations.load())},onCreate:function(t,r,n){return e(u.usersOperations.create({login:t,password:r,isAdmin:n}))},onEdit:function(t,r,n,o){return e(u.usersOperations.edit({id:t,login:r,password:n,isAdmin:o}))}};var t,r}));t.default=m},1692:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=_(r(19)),o=_(r(0)),s=_(r(2)),a=r(20),i=r(25),u=r(44),l=r(28),c=_(r(95)),d=_(r(96)),f=_(r(97)),p=_(r(158)),h=_(r(130)),m=_(r(84)),E=_(r(55)),v=_(r(318)),y=_(r(159)),b=_(r(160)),g=_(r(50));function _(e){return e&&e.__esModule?e:{default:e}}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r){return t&&A(e.prototype,t),r&&A(e,r),e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(t){function r(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,(t=!(o=w(r).call(this,e))||"object"!==S(o)&&"function"!=typeof o?L(n):o).state={isOpen:e.isOpen},t.submit=t.submit.bind(L(L(t))),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(r,y.default),D(r,null,[{key:"onSubmit",value:function(){var t,r=(t=n.default.mark(function t(r,o,s){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.data){t.next=6;break}return t.next=3,s.onEdit(s.data.get("id"),this.getValue(s,"login"),this.getValue(s,"password"),"on"===this.getValue(s,"isAdmin"));case 3:a=t.sent,t.next=9;break;case 6:return t.next=8,s.onCreate(this.getValue(s,"login"),this.getValue(s,"password"),"on"===this.getValue(s,"isAdmin"));case 8:a=t.sent;case 9:if(!0!==a){t.next=14;break}return t.next=12,s.onLoad();case 12:t.next=16;break;case 14:if(!a||!e.isObject(a)){t.next=16;break}throw new u.SubmissionError(a);case 16:return t.abrupt("return",a);case 17:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var s=t.apply(e,r);function a(e){O(s,n,o,a,i,"next",e)}function i(e){O(s,n,o,a,i,"throw",e)}a(void 0)})});return function(e,t,n){return r.apply(this,arguments)}}()},{key:"getDerivedStateFromProps",value:function(t,r){var n={};if(r.isOpen!==t.isOpen){var o=t.data&&t.data.get("login"),s=t.data&&t.data.get("roles").includes(g.default.roles.ADMIN);t.dispatch(t.change("login",o||"")),t.dispatch(t.change("password","")),t.dispatch(t.change("isAdmin",s?"on":"off")),t.dispatch(t.clearAsyncError()),t.dispatch(t.clearSubmitErrors()),n.isOpen=t.isOpen}return e.keys(n).length?n:null}}]),D(r,[{key:"render",value:function(){var t=this;return o.default.createElement(c.default,{maxWidth:"xs",fullWidth:!0,open:this.props.isOpen,onClose:this.props.onCancel},o.default.createElement(h.default,null,o.default.createElement(i.FormattedMessage,{id:this.props.data?"EDIT_USER_TITLE_EDIT":"EDIT_USER_TITLE_CREATE"})),this.props.error&&o.default.createElement(f.default,null,e.map(e.isArray(this.props.error)?this.props.error:[this.props.error],function(r,n){return o.default.createElement(p.default,{key:"error-".concat(n),classes:{root:t.props.classes.error}},e.isArray(r)?o.default.createElement(i.FormattedMessage,{id:r[0],values:r[1]}):o.default.createElement(i.FormattedMessage,{id:r}))})),o.default.createElement(f.default,null,o.default.createElement(m.default,{container:!0,spacing:16,component:"form",noValidate:!0,autoComplete:"off",onSubmit:this.submit},o.default.createElement(m.default,{item:!0,xs:12},o.default.createElement(b.default,{formFields:this.constructor.fields,formProps:this.props,name:"login",type:"text",onSubmit:this.submit})),o.default.createElement(m.default,{item:!0,xs:12},o.default.createElement(b.default,{formFields:this.constructor.fields,formProps:this.props,name:"password",type:"password",onSubmit:this.submit})),o.default.createElement(m.default,{item:!0,xs:12},o.default.createElement(b.default,{formFields:this.constructor.fields,formProps:this.props,name:"isAdmin",type:"checkbox",onSubmit:this.submit})))),o.default.createElement(d.default,{classes:{root:this.props.classes.actions}},o.default.createElement(E.default,{variant:"contained",color:"primary",disabled:this.props.submitting,onClick:this.props.onCancel},o.default.createElement(i.FormattedMessage,{id:"EDIT_USER_CANCEL"})),o.default.createElement(E.default,{variant:"contained",color:"secondary",disabled:this.props.submitting,onClick:this.submit},o.default.createElement(i.FormattedMessage,{id:"EDIT_USER_SUBMIT"}))))}}]),r}();M(x,"propTypes",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){M(e,t,r[t])})}return e}({},y.default.propTypes,{intl:i.intlShape,theme:s.default.object.isRequired,classes:s.default.object.isRequired,isOpen:s.default.bool.isRequired,data:s.default.instanceOf(a.Map),onCancel:s.default.func.isRequired,onLoad:s.default.func.isRequired,onCreate:s.default.func.isRequired,onEdit:s.default.func.isRequired})),M(x,"formName","editUserForm"),M(x,"fields",{login:{normalize:"rows:1|remove:spaces",transform:"trim",label:"EDIT_USER_LOGIN_LABEL"},password:{label:"EDIT_USER_PASSWORD_LABEL"},isAdmin:{label:"EDIT_USER_ADMIN_LABEL"}});var I=(0,l.withStyles)(function(){return{error:{color:v.default[500]},actions:{paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:"1rem"}}},{withTheme:!0})(x);t.default=I}).call(this,r(11))},184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usersSelectors=t.usersOperations=t.usersTypes=t.default=void 0;var n,o=(n=r(353))&&n.__esModule?n:{default:n},s=u(r(122));t.usersTypes=s;var a=u(r(354));t.usersOperations=a;var i=u(r(185));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}t.usersSelectors=i;var l=o.default;t.default=l},185:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditModalData=t.isEditModalOpen=t.isAllDeselected=t.isAllSelected=t.getNumSelected=t.getSelected=t.getList=void 0;var n=function(e){return e.getIn(["users","list"])};t.getList=n;var o=function(e){return e.getIn(["users","list"]).filter(function(e){return!!e.get("isSelected")})};t.getSelected=o;t.getNumSelected=function(e){return o(e).size};t.isAllSelected=function(e){return n(e).size===o(e).size};t.isAllDeselected=function(e){return 0===o(e).size};t.isEditModalOpen=function(e){return e.getIn(["users","isEditModalOpen"])};t.getEditModalData=function(e){var t=e.getIn(["users","editModalUserId"]);return t?e.getIn(["users","list"]).find(function(e){return e.get("id")===t}):null}},353:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(20),o=r(82),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(122));var a=(0,o.combineReducers)({list:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,n.List)([]),r=arguments.length>1?arguments[1]:void 0;switch(r.type){case s.SET_LIST:if(!e.isUndefined(r.list))return(0,n.fromJS)(r.list).map(function(e,r){return e.set("isSelected",!!t.getIn([r,"isSelected"]))});break;case s.SET_SELECTED:if(!e.isUndefined(r.userId))return t.withMutations(function(e){var t=e.findIndex(function(e){return e.get("id")===r.userId});-1!==t&&e.setIn([t,"isSelected"],!!r.isSelected)});break;case s.SELECT_ALL:return t.map(function(e){return e.set("isSelected",!0)});case s.DESELECT_ALL:return t.map(function(e){return e.set("isSelected",!1)})}return t},editModalUserId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.SHOW_EDIT_MODAL:return t.userId||null}return e},isEditModalOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case s.SHOW_EDIT_MODAL:return!0;case s.HIDE_EDIT_MODAL:return!1}return e}});t.default=a}).call(this,r(11))},354:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.edit=t.create=t.load=t.editFirstSelected=t.deselectAll=t.selectAll=t.setSelected=t.hideEditModal=t.showEditModal=void 0;var n=l(r(19)),o=u(r(355)),s=u(r(185)),a=r(41),i=l(r(50));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var s=e.apply(t,r);function a(e){c(s,n,o,a,i,"next",e)}function i(e){c(s,n,o,a,i,"throw",e)}a(void 0)})}}var f=o.showEditModal;t.showEditModal=f;var p=o.hideEditModal;t.hideEditModal=p;var h=o.setSelected;t.setSelected=h;var m=o.selectAll;t.selectAll=m;var E=o.deselectAll;t.deselectAll=E;t.editFirstSelected=function(){return e=d(n.default.mark(function e(t,r){var a;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=s.getSelected(r())).size){e.next=3;break}return e.abrupt("return",t(o.showEditModal({userId:a.first().get("id")})));case 3:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)};var e};t.load=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).req;return r=d(n.default.mark(function r(s){var i,u;return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=6;break}return r.next=3,t.di.get("repository.users").getUsers(t);case 3:i=r.sent,r.next=10;break;case 6:return r.next=8,s(a.appOperations.gqlQuery("\n          query {\n            users {\n              id\n              login\n              roles\n            }\n          }\n        "));case 8:u=r.sent,i=u&&e.get(u,"data.users");case 10:return r.next=12,s(o.setList({list:i}));case 12:case"end":return r.stop()}},r,this)})),function(e){return r.apply(this,arguments)};var r};t.create=function(t){var r=t.login,s=t.password,u=t.isAdmin;return l=d(n.default.mark(function t(l){var c,d,f,p,h,m,E,v,y;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=!1,t.prev=1,t.next=4,l(a.appOperations.gqlQuery("\n          mutation ($login: String, $password: String, $roles: [UserRole]) {\n            createUser(login: $login, password: $password, roles: $roles) {\n              success\n            }\n          }\n        ",{login:r,password:s,roles:e.compact([u&&i.default.roles.ADMIN])}));case 4:if(!(d=t.sent)||!e.get(d,"data.createUser.success",!1)){t.next=11;break}return t.next=8,l(o.hideEditModal());case 8:return t.abrupt("return",!0);case 11:for(c={},f=d&&e.get(d,"errors",[]),p=!0,h=!1,m=void 0,t.prev=16,E=f[Symbol.iterator]();!(p=(v=E.next()).done);p=!0)(y=v.value)&&"E_VALIDATION"===y.code?e.merge(c,y.details):c._error=(c._error||[]).concat([y.message]);t.next=24;break;case 20:t.prev=20,t.t0=t.catch(16),h=!0,m=t.t0;case 24:t.prev=24,t.prev=25,p||null==E.return||E.return();case 27:if(t.prev=27,!h){t.next=30;break}throw m;case 30:return t.finish(27);case 31:return t.finish(24);case 32:e.keys(c).length||(c={_error:"EDIT_USER_FAILED"});case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(1),console.error(t.t1);case 38:return t.abrupt("return",c);case 39:case"end":return t.stop()}},t,this,[[1,35],[16,20,24,32],[25,,27,31]])})),function(e){return l.apply(this,arguments)};var l};t.edit=function(t){var r=t.id,s=t.login,u=t.password,l=t.isAdmin;return c=d(n.default.mark(function t(c){var d,f,p,h,m,E,v,y,b;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=!1,t.prev=1,t.next=4,c(a.appOperations.gqlQuery("\n          mutation ($id: String, $login: String, $password: String, $roles: [UserRole]) {\n            editUser(id: $id, login: $login, password: $password, roles: $roles) {\n              success\n            }\n          }\n        ",{id:r,login:s,password:u,roles:e.compact([l&&i.default.roles.ADMIN])}));case 4:if(!(f=t.sent)||!e.get(f,"data.editUser.success",!1)){t.next=11;break}return t.next=8,c(o.hideEditModal());case 8:return t.abrupt("return",!0);case 11:for(d={},p=f&&e.get(f,"errors",[]),h=!0,m=!1,E=void 0,t.prev=16,v=p[Symbol.iterator]();!(h=(y=v.next()).done);h=!0)(b=y.value)&&"E_VALIDATION"===b.code?e.merge(d,b.details):d._error=(d._error||[]).concat([b.message]);t.next=24;break;case 20:t.prev=20,t.t0=t.catch(16),m=!0,E=t.t0;case 24:t.prev=24,t.prev=25,h||null==v.return||v.return();case 27:if(t.prev=27,!m){t.next=30;break}throw E;case 30:return t.finish(27);case 31:return t.finish(24);case 32:e.keys(d).length||(d={_error:"EDIT_USER_FAILED"});case 33:t.next=38;break;case 35:t.prev=35,t.t1=t.catch(1),console.error(t.t1);case 38:return t.abrupt("return",d);case 39:case"end":return t.stop()}},t,this,[[1,35],[16,20,24,32],[25,,27,31]])})),function(e){return c.apply(this,arguments)};var c};t.remove=function(t){var r=t.id;return o=d(n.default.mark(function t(o){var s;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(a.appOperations.gqlQuery("\n        mutation ($id: String) {\n          deleteUser(id: $id) {\n            success\n          }\n        }\n      ",{id:r}));case 2:return s=t.sent,t.abrupt("return",s&&e.get(s,"data.deleteUser.success")||!1);case 4:case"end":return t.stop()}},t,this)})),function(e){return o.apply(this,arguments)};var o}}).call(this,r(11))},355:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideEditModal=t.showEditModal=t.deselectAll=t.selectAll=t.setSelected=t.setList=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}(r(122));t.setList=function(e){var t=e.list;return{type:n.SET_LIST,list:t}};t.setSelected=function(e){var t=e.userId,r=e.isSelected;return{type:n.SET_SELECTED,userId:t,isSelected:r}};t.selectAll=function(){return{type:n.SELECT_ALL}};t.deselectAll=function(){return{type:n.DESELECT_ALL}};t.showEditModal=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userId;return{type:n.SHOW_EDIT_MODAL,userId:e}};t.hideEditModal=function(){return{type:n.HIDE_EDIT_MODAL}}}},[[1685,1,0]]]);